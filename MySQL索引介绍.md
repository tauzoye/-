# MySQL索引介绍 #
## 索引的作用 ##
1. 提高查询效率
2. 避免回表查询
3. 消除数据分组（group by）/排序（order by）
4. 优化聚合查询（count,sum,avg）
5. 用于多表join关联查询
6. 保证数据唯一性（唯一性约束）
7. InnoDB行锁实现

## 索引的影响 ##
1. 增加IO成本
2. 需要更多磁盘空间

## 索引类型 ##
-  BTree: InnoDB , MyISAM
-  Hash: HEAP,NDB,InnoDB AHI
-  RTree
-  FULLTEXT

### BTree ###
- 所有数据都在叶子节点上，链表的索引数据是有序的
- 非叶子节点相当于叶子节点的索引，叶子节点是存储数据的数据层
- 更适合文件系统


### 聚集索引 ###
- Key值顺序与数据行的物理（相对）存储顺序是一致的
- 每张表只能建一个聚集索引

#### 聚集索引列选择建议 ####
- int/bigint
- 数据连续单调递增（数据不可太离散随机）
- 与业务无关
- 不进行频繁修改与删除

### 主键索引 ###
- 主键索引必须是聚集索引
- 不可为空

### 辅助索引/二级索引/普通索引（非聚集索引） ###
- InnoDB辅助索引查找数据，辅助索引通过指针找到主键索引的值，再通过主键值找到对应的数据
- col1->(col1,PK)->PK->Row Data


### 联合索引 ###
- 多列组成，也叫多列索引
- 适合where条件中的多列组合，也可避免回表查询
- 建议：
	1. where条件经常出现的列放在联合索引中
	2. 选择性（过滤性/基数）大的列放在联合索引的左边
	3. 范围查询考虑闭合（时间考虑具体到天）

